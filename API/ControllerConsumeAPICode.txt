public class EmployeesController : Controller
{
HttpClient client = new HttpClient();

    public async Task<List<Employees>> GetAllEmployee()
    {
        client.BaseAddress = new Uri("http://localhost:58806/");
        client.DefaultRequestHeaders.Accept.Clear();
        client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));
        List<Employees> empList = new List<Employees>();
        HttpResponseMessage response = await client.GetAsync("api/employees");

        if (response.IsSuccessStatusCode)

            return (await response.Content.ReadAsAsync<List<Employees>>());
        else
            return null;


    }

    public async Task<int> AddEmployee(Employees emp)
    {
        client.BaseAddress = new Uri("http://localhost:58806/");
        client.DefaultRequestHeaders.Accept.Clear();
        client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));

        HttpResponseMessage response = await client.PostAsJsonAsync("api/employees", emp);

        if (response.IsSuccessStatusCode)

            return (emp.ID);
        else
            return 0;


    }

    public async Task<ActionResult> Index()
    {
        var data = await GetAllEmployee();

        return View(data);
    }

    public ActionResult Create()
    {
        return View();
    }
    [HttpPost]
    public async Task<ActionResult> Create(Employees employees)
    {
        var res = await AddEmployee(employees);
        if (res > 0)
            return RedirectToAction("Index");
        else
            return View();
    }
}